<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speed Typing</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="main-box">
        <div class="word-box-container">
            <div class="word-box" id="1"></div>
            <div class="word-box" id="2"></div>
            <div class="word-box" id="3"></div>
            <div class="word-box" id="4"></div>
            <div class="word-box" id="5"></div>
        </div>
        <input id="inputArea" type="text" oninput="checkWord()" style="margin:10px">
        <span id="timeLeft"></span>
    </div>
</body>

<script>
let wordNumber=document.querySelectorAll(".word-box").length;
let wordToDivDictionary={};
let timeLeft=4;
let timerInterval;

async function getWords(){
    let words=[];
    let res = await fetch(`https://random-word-api.herokuapp.com/word?number=${wordNumber}&swear=0`)
    .then(res=>res.json()
    .then(w=>words.push(w))
    );
    words=words.flat();
    return words;
}

async function setWords(){
    let words = await getWords();
    let boxes=document.querySelectorAll(".word-box");
    for(let i=0;i<words.length;i++){
        wordToDivDictionary[words[i]]=boxes[i];
        boxes[i].innerText=words[i];
    }
}

function checkWord(){
    
}

function decreaseTimer(){
    if(timeLeft===1){
        document.querySelector("#inputArea").disabled=true;
        clearInterval(timerInterval);
    }
    timeLeft--;
    document.querySelector("#timeLeft").innerText=timeLeft;
}

async function init(){
    await setWords();
    document.querySelector("#timeLeft").innerText=timeLeft;
    timerInterval=setInterval(decreaseTimer,1000);
}


init();
</script>

</html>